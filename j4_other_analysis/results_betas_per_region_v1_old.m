% regions as identified in contrast firstrun edt>odt ([1 1 -2 0 0 0 0 0
% 0...]);


%%
ind=1;

regions(ind).name = 'Parahippocampal_Gyr_AND_Amygdala_(R)';

regions(ind).coords = [   18.0000
    -5.5000
    -19.0000];

regions(ind).bet = [    1.3844
    1.2908
    -0.5509
    0.9517
    0.8427
    -0.5372
    0.9567
    0.8881
    -0.2600
    1.1236
    0.9130
    -0.5563
    0.8517
    0.7054
    -0.5264
    0.9109
    0.9389
    -0.4955];

ind=ind+1;



regions(ind).name = 'Fusiform_Gyr';
regions(ind).coords = [
    43.5000
  -52.0000
  -22.0000
  ];
regions(ind).bet = [ 3.0185
    3.0188
    0.6776
    2.5592
    2.6260
    0.3975
    2.7774
    2.7400
    0.5582
    3.1197
    2.6704
    0.5349
    2.4582
    2.5592
    0.0659
    2.5363
    2.4544
    0.1553];
ind=ind+1;


% regions(ind).name = 'FusGyr';
% regions(ind).coords = [  39.0000
%   -41.5000
%   -23.5000
%     ];
% regions(ind).bet = [ 2.2287
%     2.2128
%     0.2741
%     1.9789
%     1.9784
%     0.1589
%     2.0251
%     2.1231
%     0.2346
%     2.3058
%     2.1081
%     0.3193
%     1.8360
%     1.9018
%    -0.1409
%     1.9539
%     1.8928
%     0.0374
%     ];
% ind=ind+1;

regions(ind).name = 'Parahippocampal_Gyr_AND_Amygdala_(L)';
regions(ind).coords = [-21.0000
   -5.5000
  -17.5000
    ];
regions(ind).bet = [1.1966
    1.1386
   -0.5886
    0.6533
    0.6667
   -0.5302
    0.9037
    0.8443
   -0.2757
    1.0302
    0.7565
   -0.2911
    0.4887
    0.5611
   -0.6070
    0.7322
    0.7492
   -0.2953
    ];
ind=ind+1;

regions(ind).name = 'Fusiform_Gyr';
regions(ind).coords = [  -43.5000
  -47.5000
  -22.0000
    ];
regions(ind).bet = [ 2.2286
    2.0311
    0.4892
    1.9458
    1.7850
    0.3276
    2.0595
    1.8650
    0.3314
    2.4494
    2.0758
    0.4412
    1.9849
    1.8390
    0.0289
    2.0035
    1.7478
    0.2307
    ];
ind=ind+1;

regions(ind).name = 'Inferior_Frontal_Gyr_(DLPFC)';
regions(ind).coords = [49.5000
   30.5000
   15.5000
    ];
regions(ind).bet = [ 0.9712
    0.8967
   -0.5093
    0.6618
    0.4193
   -0.4770
    0.7811
    0.5779
   -0.5708
    1.0381
    0.6437
   -0.2065
    0.8944
    0.1352
   -0.6547
    0.7282
    0.1599
   -0.6235
    ];
ind=ind+1;

regions(ind).name = 'Middle_Temporal_Gyr';
regions(ind).coords = [   43.5000
  -65.5000
   18.5000
    ];
regions(ind).bet = [ 1.0582
    1.0176
   -0.0714
    0.7002
    0.6664
   -0.3015
    0.8456
    0.8158
   -0.1417
    0.9636
    0.5936
   -0.1391
    0.5476
    0.4626
   -0.4047
    0.6197
    0.5812
   -0.1339
    ];
ind=ind+1;

regions(ind).name = 'Middle_Frontal_Gyr';
regions(ind).coords = [-51.0000
   27.5000
   23.0000
    ];
regions(ind).bet = [ 0.8685
    0.2768
   -0.6564
    0.6327
    0.0957
   -0.4011
    0.8289
   -0.1295
   -0.3958
    0.8494
    0.0309
   -0.3525
    0.7785
   -0.2641
   -0.5547
    0.7446
   -0.0704
   -0.3483
    ];
ind=ind+1;

regions(ind).name = 'Middle_Temporal_Gyr';
regions(ind).coords = [   -48
   -61
     8
    ];
regions(ind).bet = [ 1.2472
    0.9410
   -0.0875
    0.8369
    0.5307
   -0.1877
    0.8144
    0.5548
   -0.2070
    1.0609
    0.5800
   -0.0119
    0.6040
    0.1188
   -0.3701
    0.5702
    0.2914
   -0.3569
    ];
ind=ind+1;

regions(ind).name = 'Middle_Temporal_Gyr';
regions(ind).coords = [   49.5000
  -13.0000
  -16.0000
    ];
regions(ind).bet = [0.4871
    0.1765
   -0.4552
    0.2099
   -0.0357
   -0.5044
    0.3212
   -0.0464
   -0.2810
    0.4657
   -0.0227
   -0.2579
    0.1770
   -0.1582
   -0.4342
    0.1280
   -0.0418
   -0.1752
    ];
ind=ind+1;

regions(ind).name = 'Middle_Frontal_Gyr';
regions(ind).coords = [42
    17
    26
    ];
regions(ind).bet = [ 2.4179
    1.9172
    0.8326
    1.8522
    1.3893
    0.4868
    2.1702
    1.4675
    0.4313
    2.2497
    1.4463
    0.5993
    1.7268
    0.8809
    0.0310
    1.7114
    0.8675
    0.2248
    ];
ind=ind+1;

regions(ind).name = 'Inferior_Frontal_Gyr';
regions(ind).coords = [-54
    41
     8
    ]; 
regions(ind).bet = [0.4764
   -0.1500
   -1.0004
   -0.0675
   -0.6726
   -0.8835
    0.1683
   -0.5164
   -0.5813
    0.1041
   -0.3989
   -0.8557
   -0.0839
   -0.6630
   -0.9559
   -0.0239
   -0.6639
   -0.9743
    ];
ind=ind+1;

regions(ind).name = 'Middle_Frontal_Gyr_AND_BA10';
regions(ind).coords = [  -51.0000
   48.5000
   -1.0000
    ];
regions(ind).bet = [ 0.6460
    0.2080
   -0.6838
    0.5006
   -0.2348
   -0.6472
    0.6047
   -0.2297
   -0.5847
    0.8042
   -0.1616
   -0.7117
    0.3768
   -0.5149
   -1.1470
    0.4087
   -0.3425
   -1.0035
    ];
ind=ind+1;

regions(ind).name = 'Uncus';
regions(ind).coords = [   -36
    -7
   -34
    ];
regions(ind).bet = [    0.4435
    0.5777
   -0.1404
    0.2630
    0.3258
   -0.2437
    0.3239
    0.3726
   -0.1326
    0.3662
    0.5337
   -0.0534
    0.1155
    0.2923
   -0.3336
    0.1437
    0.2409
   -0.0844
    ];
ind=ind+1;

regions(ind).name = 'Inferior_Frontal_Gyr_AND_BA47';
regions(ind).coords = [31.5000
   33.5000
  -16.0000
    ];
regions(ind).bet = [   -0.0037
    0.1101
   -0.5560
   -0.3535
   -0.3466
   -0.7081
   -0.1318
   -0.0449
   -0.3598
    0.0301
    0.0666
   -0.4767
   -0.2062
    0.0048
   -0.5149
   -0.0998
   -0.0836
   -0.4852
    ];
ind=ind+1;

regions(ind).name = 'Middle_Frontal_Gyr';
regions(ind).coords = [37.5000
    6.5000
   33.5000
    ];
regions(ind).bet = [2.9181
    2.4343
    1.4288
    2.5777
    1.9568
    1.0497
    2.7301
    1.9860
    1.0037
    3.0136
    2.0352
    1.2867
    2.4743
    1.5368
    0.6392
    2.5623
    1.6151
    0.8674
    ];
ind=ind+1;

regions(ind).name = 'Uncus';
regions(ind).coords = [34.5000
   -2.5000
  -38.5000
    ];
regions(ind).bet = [0.2915
    0.2715
   -0.1194
    0.0483
    0.0673
   -0.1375
    0.0834
    0.1737
   -0.1577
    0.2900
    0.2697
   -0.0272
    0.0643
    0.0474
   -0.2735
    0.1763
    0.1961
   -0.1162
    ];
ind=ind+1;

regions(ind).name = 'Middle_Frontal_Gyr_AND_BA11';
regions(ind).coords = [  -42.0000
   38.0000
  -17.5000
    ];
regions(ind).bet = [ -0.0906
   -0.1610
   -0.8476
   -0.4972
   -0.2829
   -0.6962
   -0.0940
   -0.4108
   -0.5285
   -0.1332
   -0.1048
   -0.6781
   -0.6354
   -0.5156
   -1.0317
   -0.4503
   -0.4215
   -0.7524
    ];
ind=ind+1;

%%
[allbet_quan, allbet, allbet_mean] = extractbetas_allsubsfromfl();



for i=1:size(regions,2)
    j=1;
    
    regions(i).results(j).name='All_runs_eedt_mean';
    regions(i).results(j).val=mean(regions(i).bet([1 4 7 10 13 16]));
    j=j+1;    
    regions(i).results(j).name='All_runs_eedt_std';
    regions(i).results(j).val=std(regions(i).bet([1 4 7 10 13 16]));
    j=j+1;
    regions(i).results(j).name='All_runs_iedt_mean';
    regions(i).results(j).val=mean(regions(i).bet([2 5 8 11 14 17]));
    j=j+1;
    regions(i).results(j).name='All_runs_iedt_std';
    regions(i).results(j).val=std(regions(i).bet([2 5 8 11 14 17]));
    j=j+1;
    regions(i).results(j).name='All_runs_odt_mean';
    regions(i).results(j).val=mean(regions(i).bet([3 6 9 12 15 18]));
    j=j+1;
    regions(i).results(j).name='All_runs_odt_std';
    regions(i).results(j).val=std(regions(i).bet([3 6 9 12 15 18]));
    j=j+1;
        
    [h,p,ci,stats] = ttest2(regions(i).bet([1 4 7 10 13 16]), regions(i).bet([3 6 9 12 15 18]));
    regions(i).results(j).name='E_vs_O_tTest_H';
    regions(i).results(j).val=h;
    j=j+1; 
    regions(i).results(j).name='E_vs_O_tTest_p';
    regions(i).results(j).val=p;
    j=j+1;
    regions(i).results(j).name='E_vs_O_tTest_ci';
    regions(i).results(j).val=ci;
    j=j+1;
%     regions(i).results(j).name='E_vs_O_tTest_stat';
%     regions(i).results(j).val=stats;
%     j=j+1;
    
    [h,p,ci,stats] = ttest2(regions(i).bet([2 5 8 11 14 17]), regions(i).bet([3 6 9 12 15 18]));
    regions(i).results(j).name='I_vs_O_tTest_H';
    regions(i).results(j).val=h;
    j=j+1; 
    regions(i).results(j).name='I_vs_O_tTest_p';
    regions(i).results(j).val=p;
    j=j+1;
    regions(i).results(j).name='I_vs_O_tTest_ci';
    regions(i).results(j).val=ci;
    j=j+1;
%     regions(i).results(j).name='I_vs_O_tTest_stat';
%     regions(i).results(j).val=stats;
%     j=j+1;
    [h,p,ci,stats] = ttest2(regions(i).bet([1 4 7 10 13 16]), regions(i).bet([2 5 8 11 14 17]));
    regions(i).results(j).name='E_vs_I_tTest_H';
    regions(i).results(j).val=h;
    j=j+1; 
    regions(i).results(j).name='E_vs_I_tTest_p';
    regions(i).results(j).val=p;
    j=j+1;
    regions(i).results(j).name='E_vs_I_tTest_ci';
    regions(i).results(j).val=ci;
    j=j+1;
%     regions(i).results(j).name='E_vs_I_tTest_stat';
%     regions(i).results(j).val=stats;
%     j=j+1;
    
    [h,p,ci,stats] = ttest2(regions(i).bet([1 4 7]), regions(i).bet([10 13 16]));
    regions(i).results(j).name='Sess1_vs_Sess2_eedt_tTest_H';
    regions(i).results(j).val=h;
    j=j+1; 
    regions(i).results(j).name='Sess1_vs_Sess2_eedt_tTest_p';
    regions(i).results(j).val=p;
    j=j+1;
    regions(i).results(j).name='Sess1_vs_Sess2_eedt_tTest_ci';
    regions(i).results(j).val=ci;
    j=j+1;
%     regions(i).results(j).name='Sess1_vs_Sess2_eedt_tTest_stat';
%     regions(i).results(j).val=stats;
%     j=j+1;
    
    [h,p,ci,stats] = ttest2(regions(i).bet([2 5 8]), regions(i).bet([11 14 17]));
    regions(i).results(j).name='Sess1_vs_Sess2_iedt_tTest_H';
    regions(i).results(j).val=h;
    j=j+1; 
    regions(i).results(j).name='Sess1_vs_Sess2_iedt_tTest_p';
    regions(i).results(j).val=p;
    j=j+1;
    regions(i).results(j).name='Sess1_vs_Sess2_iedt_tTest_ci';
    regions(i).results(j).val=ci;
    j=j+1;
%     regions(i).results(j).name='Sess1_vs_Sess2_iedt_tTest_stat';
%     regions(i).results(j).val=stats;
%     j=j+1;
    
    [h,p,ci,stats] = ttest2(regions(i).bet([3 6 9]), regions(i).bet([12 15 18]));
    regions(i).results(j).name='Sess1_vs_Sess2_odt_tTest_H';
    regions(i).results(j).val=h;
    j=j+1; 
    regions(i).results(j).name='Sess1_vs_Sess2_odt_tTest_p';
    regions(i).results(j).val=p;
    j=j+1;
    regions(i).results(j).name='Sess1_vs_Sess2_odt_tTest_ci';
    regions(i).results(j).val=ci;
%     j=j+1;
%     regions(i).results(j).name='Sess1_vs_Sess2_odt_tTest_stat';
%     regions(i).results(j).val=stats;
    
    j=j+1;
    b = [ones(6,1) [(1:3) (1:3)]']\regions(i).bet([1 4 7 10 13 16]);
    regions(i).results(j).name='Hab_all_sess_eedt_regressor_slope';
    regions(i).results(j).val=b(2);
    j=j+1;
    regions(i).results(j).name='Hab_all_sess_eedt_regressor_intercept';
    regions(i).results(j).val=b(1);    
    j=j+1;
    b = [ones(6,1) [(1:3) (1:3)]']\regions(i).bet([2 5 8 11 14 17]);
    regions(i).results(j).name='Hab_all_sess_iedt_regressor_slope';
    regions(i).results(j).val=b(2);
    j=j+1;
    regions(i).results(j).name='Hab_all_sess_iedt_regressor_intercept';
    regions(i).results(j).val=b(1);
    j=j+1;
    b = [ones(6,1) [(1:3) (1:3)]']\regions(i).bet([3 6 9 12 15 18]);
    regions(i).results(j).name='Hab_all_sess_odt_regressor_slope';
    regions(i).results(j).val=b(2);
    j=j+1;
    regions(i).results(j).name='Hab_all_sess_odt_regressor_intercept';
    regions(i).results(j).val=b(1);
    
    j=j+1;
    b = [ones(3,1) (1:3)']\regions(i).bet([1 4 7]);
    regions(i).results(j).name='Hab_1st_sess_eedt_regressor_slope';
    regions(i).results(j).val=b(2);
    j=j+1;
    regions(i).results(j).name='Hab_1st_sess_eedt_regressor_intercept';
    regions(i).results(j).val=b(1);    
    j=j+1;
    b = [ones(3,1) (1:3)']\regions(i).bet([2 5 8]);
    regions(i).results(j).name='Hab_1st_sess_iedt_regressor_slope';
    regions(i).results(j).val=b(2);
    j=j+1;
    regions(i).results(j).name='Hab_1st_sess_iedt_regressor_intercept';
    regions(i).results(j).val=b(1);    
    j=j+1;
    b = [ones(3,1) (1:3)']\regions(i).bet([3 6 9]);
    regions(i).results(j).name='Hab_1st_sess_odt_regressor_slope';
    regions(i).results(j).val=b(2);
    j=j+1;
    regions(i).results(j).name='Hab_1st_sess_odt_regressor_intercept';
    regions(i).results(j).val=b(1);
    
    
    j=j+1;
    b = [ones(3,1) (1:3)']\regions(i).bet([10 13 16]);
    regions(i).results(j).name='Hab_2nd_sess_eedt_regressor_slope';
    regions(i).results(j).val=b(2);
    j=j+1;
    regions(i).results(j).name='Hab_2nd_sess_eedt_regressor_intercept';
    regions(i).results(j).val=b(1);
    j=j+1;
    b = [ones(3,1) (1:3)']\regions(i).bet([11 14 17]);
    regions(i).results(j).name='Hab_2nd_sess_iedt_regressor_slope';
    regions(i).results(j).val=b(2);
    j=j+1;
    regions(i).results(j).name='Hab_2nd_sess_iedt_regressor_intercept';
    regions(i).results(j).val=b(1);    
    j=j+1;
    b = [ones(3,1) (1:3)']\regions(i).bet([12 15 18]);
    regions(i).results(j).name='Hab_2nd_sess_odt_regressor_slope';
    regions(i).results(j).val=b(2);
    j=j+1;
    regions(i).results(j).name='Hab_2nd_sess_odt_regressor_intercept';
    regions(i).results(j).val=b(1);
    j=j+1;
    
    % calculate regression on single subject level, and analyse with t-test
    % if slope >0: 
    addpath('/net/mri.meduniwien.ac.at/projects/physics/fmri/data/empro15/analysis/test/');
    
    slopes=zeros(size(allbet,1),9);
    intercepts=zeros(size(allbet,1),9);
    for s=1:size(allbet,1)
        for cond=0:2
            b = [ones(6,1) [(1:3) (1:3)]']\squeeze(allbet(s,([1 4 7 10 13 16]+cond),i))';
            slopes(s,cond+1)=b(2);
            intercepts(s,cond+1)=b(1);
        end
        for m=0:1
            for cond=0:2
                b = [ones(3,1) (1:3)']\squeeze(allbet(s,([1 4 7]+m*9+cond),i))';
                slopes(s,cond+4+m*3)=b(2);
                intercepts(s,cond+4+m*3)=b(1);
            end
        end
    end
    
    regions(i).slopes=slopes;
    regions(i).intercepts=intercepts;
    regions(i).ssbetas=squeeze(allbet(:,:,i));
    
    [h,p,ci,stats] = ttest(slopes(:,1));
    regions(i).results(j).name='Hab_eedt_all_sess_tTest_H';
    regions(i).results(j).val=h;
    j=j+1; 
    regions(i).results(j).name='Hab_eedt_all_sess_tTest_p';
    regions(i).results(j).val=p;
    j=j+1;
    regions(i).results(j).name='Hab_eedt_all_sess_tTest_ci';
    regions(i).results(j).val=ci;
    j=j+1;
    
    [h,p,ci,stats] = ttest(slopes(:,2));
    regions(i).results(j).name='Hab_iedt_all_sess_tTest_H';
    regions(i).results(j).val=h;
    j=j+1; 
    regions(i).results(j).name='Hab_iedt_all_sess_tTest_p';
    regions(i).results(j).val=p;
    j=j+1;
    regions(i).results(j).name='Hab_iedt_all_sess_tTest_ci';
    regions(i).results(j).val=ci;
    j=j+1;
    
    [h,p,ci,stats] = ttest(slopes(:,3));
    regions(i).results(j).name='Hab_odt_all_sess_tTest_H';
    regions(i).results(j).val=h;
    j=j+1; 
    regions(i).results(j).name='Hab_odt_all_sess_tTest_p';
    regions(i).results(j).val=p;
    j=j+1;
    regions(i).results(j).name='Hab_odt_all_sess_tTest_ci';
    regions(i).results(j).val=ci;
    j=j+1;
    
    [h,p,ci,stats] = ttest(slopes(:,4));
    regions(i).results(j).name='Hab_eedt_1st_sess_tTest_H';
    regions(i).results(j).val=h;
    j=j+1; 
    regions(i).results(j).name='Hab_eedt_1st_sess_tTest_p';
    regions(i).results(j).val=p;
    j=j+1;
    regions(i).results(j).name='Hab_eedt_1st_sess_tTest_ci';
    regions(i).results(j).val=ci;
    j=j+1;
    
    [h,p,ci,stats] = ttest(slopes(:,5));
    regions(i).results(j).name='Hab_iedt_1st_sess_tTest_H';
    regions(i).results(j).val=h;
    j=j+1; 
    regions(i).results(j).name='Hab_iedt_1st_sess_tTest_p';
    regions(i).results(j).val=p;
    j=j+1;
    regions(i).results(j).name='Hab_iedt_1st_sess_tTest_ci';
    regions(i).results(j).val=ci;
    j=j+1;
    [h,p,ci,stats] = ttest(slopes(:,6));
    regions(i).results(j).name='Hab_odt_1st_sess_tTest_H';
    regions(i).results(j).val=h;
    j=j+1; 
    regions(i).results(j).name='Hab_odt_1st_sess_tTest_p';
    regions(i).results(j).val=p;
    j=j+1;
    regions(i).results(j).name='Hab_odt_1st_sess_tTest_ci';
    regions(i).results(j).val=ci;
    j=j+1;
    
    [h,p,ci,stats] = ttest(slopes(:,7));
    regions(i).results(j).name='Hab_eedt_2nd_sess_tTest_H';
    regions(i).results(j).val=h;
    j=j+1; 
    regions(i).results(j).name='Hab_eedt_2nd_sess_tTest_p';
    regions(i).results(j).val=p;
    j=j+1;
    regions(i).results(j).name='Hab_eedt_2nd_sess_tTest_ci';
    regions(i).results(j).val=ci;
    j=j+1;
    
    
    [h,p,ci,stats] = ttest(slopes(:,8));
    regions(i).results(j).name='Hab_iedt_2nd_sess_tTest_H';
    regions(i).results(j).val=h;
    j=j+1; 
    regions(i).results(j).name='Hab_iedt_2nd_sess_tTest_p';
    regions(i).results(j).val=p;
    j=j+1;
    regions(i).results(j).name='Hab_iedt_2nd_sess_tTest_ci';
    regions(i).results(j).val=ci;
    j=j+1;
    
    [h,p,ci,stats] = ttest(slopes(:,9));
    regions(i).results(j).name='Hab_odt_2nd_sess_tTest_H';
    regions(i).results(j).val=h;
    j=j+1; 
    regions(i).results(j).name='Hab_odt_2nd_sess_tTest_p';
    regions(i).results(j).val=p;
    j=j+1;
    regions(i).results(j).name='Hab_odt_2nd_sess_tTest_ci';
    regions(i).results(j).val=ci;
    j=j+1;
    
%     
%     [p,table,stats] = anova1([regions(i).bet([1 4 7]), regions(i).bet([10 13 16])]');
%     regions(i).results(j).name='Habituation all sess, eedt: anova1: p';
%     regions(i).results(j).val=p;
%     j=j+1;
%     regions(i).results(j).name='Habituation all sess, eedt: anova1: table';
%     regions(i).results(j).val=table;
%     j=j+1;
%     regions(i).results(j).name='Habituation all sess, eedt: anova1: stats';
%     regions(i).results(j).val=stats;
%     j=j+1;
%     [p,table,stats] = anova1([regions(i).bet([2 5 8]), regions(i).bet([11 14 17])]');
%     regions(i).results(j).name='Habituation all sess, iedt: anova1: p';
%     regions(i).results(j).val=p;
%     j=j+1;
%     regions(i).results(j).name='Habituation all sess, iedt: anova1: table';
%     regions(i).results(j).val=table;
%     j=j+1;
%     regions(i).results(j).name='Habituation all sess, iedt: anova1: stats';
%     regions(i).results(j).val=stats;
%     j=j+1;
%     [p,table,stats] = anova1([regions(i).bet([3 6 9]), regions(i).bet([12 15 18])]');
%     regions(i).results(j).name='Habituation all sess, odt: anova1: p';
%     regions(i).results(j).val=p;
%     j=j+1;
%     regions(i).results(j).name='Habituation all sess, odt: anova1: table';
%     regions(i).results(j).val=table;
%     j=j+1;
%     regions(i).results(j).name='Habituation all sess, odt: anova1: stats';
%     regions(i).results(j).val=stats;
%     j=j+1;
%     
%     
%     [p,table,stats] = anova1([regions(i).bet([1 4 7])]');
%     regions(i).results(j).name='Habituation 1st sess, eedt: anova1: p';
%     regions(i).results(j).val=p;
%     j=j+1;
%     regions(i).results(j).name='Habituation 1st sess, eedt: anova1: table';
%     regions(i).results(j).val=table;
%     j=j+1;
%     regions(i).results(j).name='Habituation 1st sess, eedt: anova1: stats';
%     regions(i).results(j).val=stats;
%     j=j+1;
%     [p,table,stats] = anova1([regions(i).bet([2 5 8])]');
%     regions(i).results(j).name='Habituation 1st sess, iedt: anova1: p';
%     regions(i).results(j).val=p;
%     j=j+1;
%     regions(i).results(j).name='Habituation 1st sess, iedt: anova1: table';
%     regions(i).results(j).val=table;
%     j=j+1;
%     regions(i).results(j).name='Habituation 1st sess, iedt: anova1: stats';
%     regions(i).results(j).val=stats;
%     j=j+1;
%     [p,table,stats] = anova1([regions(i).bet([3 6 9])]');
%     regions(i).results(j).name='Habituation 1st sess, odt: anova1: p';
%     regions(i).results(j).val=p;
%     j=j+1;
%     regions(i).results(j).name='Habituation 1st sess, odt: anova1: table';
%     regions(i).results(j).val=table;
%     j=j+1;
%     regions(i).results(j).name='Habituation 1st sess, odt: anova1: stats';
%     regions(i).results(j).val=stats;
%     j=j+1;
%     
%     
%     [p,table,stats] = anova1([regions(i).bet([10 13 16])]');
%     regions(i).results(j).name='Habituation 2nd sess, eedt: anova1: p';
%     regions(i).results(j).val=p;
%     j=j+1;
%     regions(i).results(j).name='Habituation 2nd sess, eedt: anova1: table';
%     regions(i).results(j).val=table;
%     j=j+1;
%     regions(i).results(j).name='Habituation 2nd sess, eedt: anova1: stats';
%     regions(i).results(j).val=stats;
%     j=j+1;
%     [p,table,stats] = anova1([regions(i).bet([11 14 17])]');
%     regions(i).results(j).name='Habituation 2nd sess, iedt: anova1: p';
%     regions(i).results(j).val=p;
%     j=j+1;
%     regions(i).results(j).name='Habituation 2nd sess, iedt: anova1: table';
%     regions(i).results(j).val=table;
%     j=j+1;
%     regions(i).results(j).name='Habituation 2nd sess, iedt: anova1: stats';
%     regions(i).results(j).val=stats;
%     j=j+1;
%     [p,table,stats] = anova1([regions(i).bet([12 15 18])]');
%     regions(i).results(j).name='Habituation 2nd sess, odt: anova1: p';
%     regions(i).results(j).val=p;
%     j=j+1;
%     regions(i).results(j).name='Habituation 2nd sess, odt: anova1: table';
%     regions(i).results(j).val=table;
%     j=j+1;
%     regions(i).results(j).name='Habituation 2nd sess, odt: anova1: stats';
%     regions(i).results(j).val=stats;
%     j=j+1;
% %     
%     regions(i).results(j).name='';
%     regions(i).results(j).val=
%     j=j+1;
end


C={};
for k=1:size(regions(1).results,2)
    %     disp(regions(1).results(k).name);
    %     regions(1).results(k).val
    C(1,k)={regions(1).results(k).name};
    for l=1:size(regions,2)        
        C(l+1,k)={regions(l).results(k).val};
    end
end



ds = cell2dataset(C);
export(ds, 'file', 'results_per_region.csv', 'Delimiter','semi')

fileID = fopen('celldata.dat','w');
formatSpec = [repmat(['%s '],1,size(C,2))  ' \n '];
[nrows,ncols] = size(C);
for row = 1:nrows
    fprintf(fileID,formatSpec,C{row,1:10});
end
fclose(fileID);

D={};
D{1,1}={'regionName'};
for i=1:size(regions,2)
    D{i+1,1}={regions(i).name};
end

D={};
D{1,1}={'RegionName'};
for k=1:size(regions(1).results,2)
    %     disp(regions(1).results(k).name);
    %     regions(1).results(k).val
    D(1,k+1)={regions(1).results(k).name};
    for l=1:size(regions,2)        
        D(l+1,k+1)={regions(l).results(k).val};
    end
end
for l=1:size(regions,2)     
D{l+1,1}={regions(l).name};%{regions(l).name};
end

